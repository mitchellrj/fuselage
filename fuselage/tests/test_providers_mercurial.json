{"fuselage.tests.test_providers_mercurial.TestHg.test_tag_to_tag": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:4 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:5 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:6 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:7 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:8 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:9 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:10 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:11 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:12 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:13 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:14 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:15 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:16 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:17 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:18 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:19 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:20 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:21 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:22 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:23 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:24 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:25 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:26 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:27 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:28 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:29 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:30 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:31 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:32 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:33 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:34 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:35 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:36 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:37 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:38 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:39 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:40 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:41 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:42 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:43 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nGet:44 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:45 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:46 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:47 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:48 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:49 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:50 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:51 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:52 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:53 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:54 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nFetched 20.9 MB in 6s (3299 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (5008 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426208, 0, 0, 0, 4096, 1410702247, 1410702247, 1410702247], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50430502, 0, 0, 0, 93, 1410702247, 1410702247, 1410702247], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50430503, 0, 0, 0, 2189, 1410702248, 1410702248, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["63 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702250, 1410702250, 1410702250], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702248, 1410702247, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702248, 1410702248, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702250, 1410702250, 1410702250], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702248, 1410702247, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702248, 1410702248, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['549954d7a0d7']', target '3.8' is at revision '['ce314407ffb0']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702250, 1410702250, 1410702250], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702248, 1410702247, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702248, 1410702248, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['549954d7a0d7']', target '3.8' is at revision '['ce314407ffb0']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["10 files updated, 0 files merged, 4 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 4, 50426208, 0, 0, 0, 4096, 1410702253, 1410702253, 1410702253], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702248, 1410702247, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702248, 1410702248, 1410702248], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null]], "fuselage.tests.test_providers_mercurial.TestHg.test_checkout_tag": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702189, 1402180756, 1410702189], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702189, 1402180756, 1410702189], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:4 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:5 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:6 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:7 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:8 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:9 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:10 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:11 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:12 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:13 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:14 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:15 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:16 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:17 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:18 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:19 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:20 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:21 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:22 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:23 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:24 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:25 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nGet:26 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:27 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:28 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:29 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:30 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:31 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:32 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:33 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:34 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:35 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:36 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:37 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:38 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:39 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:40 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:41 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:42 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:43 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:44 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:45 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:46 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:47 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:48 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:49 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:50 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:51 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:52 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:53 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:54 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nFetched 20.9 MB in 6s (3477 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (5188 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426215, 0, 0, 0, 4096, 1410702205, 1410702205, 1410702205], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428017, 0, 0, 0, 93, 1410702205, 1410702205, 1410702205], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428018, 0, 0, 0, 2189, 1410702206, 1410702206, 1410702206], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["59 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702189, 1402180756, 1410702189], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 4, 50426215, 0, 0, 0, 4096, 1410702210, 1410702210, 1410702210], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702206, 1410702205, 1410702206], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702206, 1410702206, 1410702206], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null]], "fuselage.tests.test_providers_mercurial.TestHg.test_change_branch": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:4 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:5 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:6 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:7 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:8 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:9 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:10 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:11 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:12 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:13 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:14 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:15 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:16 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:17 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:18 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:19 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:20 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:21 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:22 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:23 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:24 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:25 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:26 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:27 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:28 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:29 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:30 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:31 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:32 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:33 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:34 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:35 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:36 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:37 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:38 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:39 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:40 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:41 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:42 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:43 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nGet:44 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:45 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:46 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:47 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:48 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:49 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:50 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:51 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:52 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:53 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:54 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nFetched 20.9 MB in 6s (3131 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (4960 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426215, 0, 0, 0, 4096, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428017, 0, 0, 0, 93, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428018, 0, 0, 0, 2189, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["61 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426215, 0, 0, 0, 4096, 1410702164, 1410702164, 1410702164], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426215, 0, 0, 0, 4096, 1410702164, 1410702164, 1410702164], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['00e9b36e4f3f']', target 'issue_84' is at revision '['d9ac715eae35']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426215, 0, 0, 0, 4096, 1410702164, 1410702164, 1410702164], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['00e9b36e4f3f']', target 'issue_84' is at revision '['d9ac715eae35']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["33 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702144, 1402180756, 1410702144], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426215, 0, 0, 0, 4096, 1410702167, 1410702167, 1410702167], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702161, 1410702161, 1410702161], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null]], "fuselage.tests.test_providers_mercurial.TestHg.test_branch_to_tag": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:4 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:5 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:6 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:7 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:8 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:9 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:10 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:11 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:12 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:13 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:14 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:15 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:16 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:17 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:18 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:19 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:20 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:21 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:22 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:23 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:24 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:25 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nGet:26 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:27 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:28 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:29 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:30 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:31 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:32 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:33 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:34 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:35 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:36 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:37 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:38 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:39 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:40 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:41 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:42 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:43 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:44 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:45 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:46 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:47 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:48 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:49 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:50 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:51 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:52 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:53 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:54 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nFetched 20.9 MB in 5s (3536 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (5319 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426208, 0, 0, 0, 4096, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50430502, 0, 0, 0, 93, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50430503, 0, 0, 0, 2189, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["61 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702139, 1410702139, 1410702139], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702139, 1410702139, 1410702139], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['00e9b36e4f3f']', target '3.8' is at revision '['ce314407ffb0']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426208, 0, 0, 0, 4096, 1410702139, 1410702139, 1410702139], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [255, "", "abort: UPDATE: Checkout is at '['00e9b36e4f3f']', target '3.8' is at revision '['ce314407ffb0']'\n"], "SystemError"], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["53 files updated, 0 files merged, 6 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702120, 1402180756, 1410702120], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 4, 50426208, 0, 0, 0, 4096, 1410702142, 1410702142, 1410702142], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50430502, 0, 0, 0, 93, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50430503, 0, 0, 0, 2189, 1410702136, 1410702136, 1410702136], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Tag is already available locally", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null]], "fuselage.tests.test_providers_mercurial.TestHg.test_missing_hg": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702231, 1402180756, 1410702231], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null]], "fuselage.tests.test_providers_mercurial.TestHg.test_checkout_revision": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702168, 1402180756, 1410702168], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:4 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:5 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:6 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:7 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:8 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:9 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:10 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:11 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:12 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:13 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:14 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:15 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:16 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:17 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:18 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:19 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:20 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:21 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:22 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:23 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:24 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:25 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:26 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:27 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:28 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:29 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:30 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:31 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:32 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:33 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:34 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:35 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:36 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:37 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:38 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:39 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:40 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:41 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nGet:42 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:43 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:44 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:45 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:46 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:47 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:48 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:49 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:50 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:51 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:52 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:53 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:54 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nFetched 20.9 MB in 7s (2682 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (4793 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426215, 0, 0, 0, 4096, 1410702186, 1410702186, 1410702186], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428017, 0, 0, 0, 93, 1410702186, 1410702186, 1410702186], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428018, 0, 0, 0, 2189, 1410702186, 1410702186, 1410702186], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["59 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null]], "fuselage.tests.test_providers_mercurial.TestHg.test_clone": [["exists", true, null], ["exists", false, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702211, 1402180756, 1410702211], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["makedirs", null, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702211, 1402180756, 1410702211], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", [1, "", "No packages found matching mercurial.\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", [100, "Reading package lists...\nBuilding dependency tree...\n", "E: Unable to locate package mercurial\n"], "SystemError"], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Get:1 http://uk.archive.ubuntu.com precise Release.gpg [198 B]\nGet:2 http://uk.archive.ubuntu.com precise-updates Release.gpg [198 B]\nGet:3 http://security.ubuntu.com precise-security Release.gpg [198 B]\nGet:4 http://uk.archive.ubuntu.com precise Release [49.6 kB]\nGet:5 http://security.ubuntu.com precise-security Release [50.7 kB]\nGet:6 http://uk.archive.ubuntu.com precise-updates Release [98.7 kB]\nGet:7 http://security.ubuntu.com precise-security/main amd64 Packages [421 kB]\nGet:8 http://uk.archive.ubuntu.com precise/main amd64 Packages [1273 kB]\nGet:9 http://security.ubuntu.com precise-security/restricted amd64 Packages [4627 B]\nGet:10 http://security.ubuntu.com precise-security/universe amd64 Packages [97.3 kB]\nGet:11 http://uk.archive.ubuntu.com precise/restricted amd64 Packages [8452 B]\nGet:12 http://uk.archive.ubuntu.com precise/universe amd64 Packages [4786 kB]\nGet:13 http://security.ubuntu.com precise-security/multiverse amd64 Packages [2447 B]\nGet:14 http://security.ubuntu.com precise-security/main i386 Packages [450 kB]\nGet:15 http://security.ubuntu.com precise-security/restricted i386 Packages [4620 B]\nGet:16 http://security.ubuntu.com precise-security/universe i386 Packages [103 kB]\nGet:17 http://security.ubuntu.com precise-security/multiverse i386 Packages [2638 B]\nGet:18 http://security.ubuntu.com precise-security/main TranslationIndex [74 B]\nGet:19 http://security.ubuntu.com precise-security/multiverse TranslationIndex [72 B]\nGet:20 http://security.ubuntu.com precise-security/restricted TranslationIndex [72 B]\nGet:21 http://security.ubuntu.com precise-security/universe TranslationIndex [73 B]\nGet:22 http://security.ubuntu.com precise-security/main Translation-en [192 kB]\nGet:23 http://security.ubuntu.com precise-security/multiverse Translation-en [1299 B]\nGet:24 http://security.ubuntu.com precise-security/restricted Translation-en [1253 B]\nGet:25 http://security.ubuntu.com precise-security/universe Translation-en [60.1 kB]\nGet:26 http://uk.archive.ubuntu.com precise/multiverse amd64 Packages [119 kB]\nGet:27 http://uk.archive.ubuntu.com precise/main i386 Packages [1274 kB]\nGet:28 http://uk.archive.ubuntu.com precise/restricted i386 Packages [8431 B]\nGet:29 http://uk.archive.ubuntu.com precise/universe i386 Packages [4796 kB]\nGet:30 http://uk.archive.ubuntu.com precise/multiverse i386 Packages [121 kB]\nGet:31 http://uk.archive.ubuntu.com precise/main TranslationIndex [3706 B]\nGet:32 http://uk.archive.ubuntu.com precise/multiverse TranslationIndex [2676 B]\nGet:33 http://uk.archive.ubuntu.com precise/restricted TranslationIndex [2596 B]\nGet:34 http://uk.archive.ubuntu.com precise/universe TranslationIndex [2922 B]\nGet:35 http://uk.archive.ubuntu.com precise-updates/main amd64 Packages [831 kB]\nGet:36 http://uk.archive.ubuntu.com precise-updates/restricted amd64 Packages [13.7 kB]\nGet:37 http://uk.archive.ubuntu.com precise-updates/universe amd64 Packages [248 kB]\nGet:38 http://uk.archive.ubuntu.com precise-updates/multiverse amd64 Packages [15.3 kB]\nGet:39 http://uk.archive.ubuntu.com precise-updates/main i386 Packages [862 kB]\nGet:40 http://uk.archive.ubuntu.com precise-updates/restricted i386 Packages [13.7 kB]\nGet:41 http://uk.archive.ubuntu.com precise-updates/universe i386 Packages [254 kB]\nGet:42 http://uk.archive.ubuntu.com precise-updates/multiverse i386 Packages [15.5 kB]\nGet:43 http://uk.archive.ubuntu.com precise-updates/main TranslationIndex [3564 B]\nGet:44 http://uk.archive.ubuntu.com precise-updates/multiverse TranslationIndex [2605 B]\nGet:45 http://uk.archive.ubuntu.com precise-updates/restricted TranslationIndex [2461 B]\nGet:46 http://uk.archive.ubuntu.com precise-updates/universe TranslationIndex [2850 B]\nGet:47 http://uk.archive.ubuntu.com precise/main Translation-en [726 kB]\nGet:48 http://uk.archive.ubuntu.com precise/multiverse Translation-en [93.4 kB]\nGet:49 http://uk.archive.ubuntu.com precise/restricted Translation-en [2395 B]\nGet:50 http://uk.archive.ubuntu.com precise/universe Translation-en [3341 kB]\nGet:51 http://uk.archive.ubuntu.com precise-updates/main Translation-en [364 kB]\nGet:52 http://uk.archive.ubuntu.com precise-updates/multiverse Translation-en [9010 B]\nGet:53 http://uk.archive.ubuntu.com precise-updates/restricted Translation-en [3027 B]\nGet:54 http://uk.archive.ubuntu.com precise-updates/universe Translation-en [144 kB]\nFetched 20.9 MB in 5s (3583 kB/s)\nReading package lists...\n", ""], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["Reading package lists...\nBuilding dependency tree...\nThe following extra packages will be installed:\n  mercurial-common ucf\nSuggested packages:\n  qct wish vim emacs kdiff3 tkdiff meld xxdiff python-mysqldb python-pygments\n  python-openssl\nThe following NEW packages will be installed:\n  mercurial mercurial-common ucf\n0 upgraded, 3 newly installed, 0 to remove and 94 not upgraded.\nNeed to get 2037 kB of archives.\nAfter this operation, 6980 kB of additional disk space will be used.\nGet:1 http://uk.archive.ubuntu.com/ubuntu/ precise/main ucf all 3.0025+nmu2ubuntu1 [54.4 kB]\nGet:2 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial-common all 2.0.2-1ubuntu1 [1945 kB]\nGet:3 http://uk.archive.ubuntu.com/ubuntu/ precise/universe mercurial amd64 2.0.2-1ubuntu1 [38.0 kB]\nFetched 2037 kB in 0s (4910 kB/s)\nSelecting previously unselected package ucf.\n(Reading database ... 13890 files and directories currently installed.)\nUnpacking ucf (from .../ucf_3.0025+nmu2ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial-common.\nUnpacking mercurial-common (from .../mercurial-common_2.0.2-1ubuntu1_all.deb) ...\nSelecting previously unselected package mercurial.\nUnpacking mercurial (from .../mercurial_2.0.2-1ubuntu1_amd64.deb) ...\nSetting up ucf (3.0025+nmu2ubuntu1) ...\nSetting up mercurial-common (2.0.2-1ubuntu1) ...\nSetting up mercurial (2.0.2-1ubuntu1) ...\n", "debconf: delaying package configuration, since apt-utils is not installed\nMoving old data out of the way\n\nCreating config file /etc/mercurial/hgrc.d/hgext.rc with new version\n"], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", true, null], ["stat", [16893, 2, 50426215, 0, 0, 0, 4096, 1410702227, 1410702227, 1410702227], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["exists", false, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428017, 0, 0, 0, 93, 1410702227, 1410702227, 1410702227], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", false, null], ["put", null, null], ["exists", true, null], ["stat", [33204, 1, 50428018, 0, 0, 0, 2189, 1410702227, 1410702227, 1410702227], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["pulling from https://bitbucket.org/Jc2k/pkl/\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 737 changesets with 1246 changes to 103 files\n(run 'hg update' to get a working copy)\n", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["exists", false, null], ["exists", false, null], ["exists", false, null], ["exists", true, null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["isdir", true, null], ["check_call", ["61 files updated, 0 files merged, 0 files removed, 0 files unresolved\n", ""], null], ["exists", false, null], ["exists", true, null], ["exists", true, null], ["exists", false, null], ["isdir", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise main restricted universe multiverse\ndeb http://uk.archive.ubuntu.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu precise-security main restricted universe multiverse\n", null], ["exists", true, null], ["stat", [33188, 2, 862476659, 0, 0, 0, 270, 1410702211, 1402180756, 1410702211], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", false, null], ["check_call", ["'install ok installed'", ""], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["exists", true, null], ["stat", [16877, 5, 50426215, 0, 0, 0, 4096, 1410702229, 1410702229, 1410702229], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["exists", true, null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\n[paths]\ndefault = https://bitbucket.org/Jc2k/pkl/\n[extensions]\nshould = /dest/.hg/should.py\n", null], ["exists", true, null], ["stat", [33152, 1, 50428017, 0, 0, 0, 93, 1410702227, 1410702227, 1410702227], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrgid", ["root", "x", 0, [""]], null], ["exists", true, null], ["get", "\nfrom mercurial import util, hg, node\n\ndef should_pull(ui, repo, **opts):\n    default_path = repo.ui.configlist('paths', 'default')[0]\n\n    if not hasattr(hg, \"peer\"):\n        source, revs, checkout = hg.parseurl(ui.expandpath(default_path), [])\n        peer = hg.repository(ui, source)\n    else:\n        peer = hg.peer(ui, {}, default_path)\n\n    remote_branches = peer.branchmap()\n    local_branches = repo.branchmap()\n\n    if opts['branch'] not in remote_branches:\n        raise util.Abort('NO_SUCH_BRANCH: \"%s\" is not in the repository' % opts['branch'])\n\n    if opts['branch'] not in local_branches:\n        raise util.Abort('PULL: \"%s\" in not local, but is available in remote' % opts['branch'])\n\n    if not opts['tag']:\n        if remote_branches[opts['branch']] != local_branches[opts['branch']]:\n            raise util.Abort('PULL: \"%s\" is out of date' % opts['branch'])\n\n        ui.write(\"OK: Up to date\")\n\n    else:\n        if not opts['tag'] in repo.tags().keys():\n           raise util.Abort('PULL: \"%s\" is not in local' % opts['tag'])\n\n        ui.write(\"OK: Tag is already available locally\")\n\n\ndef should_update(ui, repo, **opts):\n    if opts['tag']:\n        target = opts['tag']\n        revmap = repo.tags()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Tag '%s' not found locally\" % target)\n        targetrev = [revmap[target]]\n    else:\n        target = opts['branch']\n        revmap = repo.branchmap()\n        if not target in revmap:\n            raise util.Abort(\"FAIL: Branch '%s' not found locally\" % target)\n        targetrev = revmap[target]\n\n    localrev = [node.short(p.node()) for p in repo[None].parents()]\n    targetrev = [node.short(p) for p in targetrev]\n\n    if localrev != targetrev:\n        raise util.Abort(\"UPDATE: Checkout is at '%s', target '%s' is at revision '%s'\" % (localrev, target, targetrev))\n\n    ui.write(\"OK: Checkout is up to date\")\n\n\ncmdtable = {\n    'should-pull': (should_pull, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    'should-update': (should_update, [('b', 'branch', 'default', 'Branch to track'), ('t', 'tag', '', 'Tag to track')], '[options]'),\n    }\n", null], ["exists", true, null], ["stat", [33152, 1, 50428018, 0, 0, 0, 2189, 1410702227, 1410702227, 1410702227], null], ["getpwnam", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["getgrnam", ["root", "x", 0, [""]], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Up to date", ""], null], ["getuid", 0, null], ["getpwuid", ["root", "x", 0, 0, "root", "/root", "/bin/bash"], null], ["check_call", ["OK: Checkout is up to date", ""], null]]}